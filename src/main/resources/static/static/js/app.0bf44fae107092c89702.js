webpackJsonp([1],{"5W1q":function(e,t){},EWIa:function(e,t){},Ej5p:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App",components:{},data:function(){return{}}},r,!1,function(e){a("wdgB")},null,null).exports,n=a("/ocq"),l=a("mvHQ"),s=a.n(l),d=a("fZjL"),c=a.n(d),u=a("ifoU"),p=a.n(u),h={data:function(){var e=this;return{loading:!1,address1Options:[{value:"海阳所",label:"海阳所"},{value:"南黄",label:"南黄"},{value:"乳山口",label:"乳山口"},{value:"乳山寨",label:"乳山寨"},{value:"午极",label:"午极"},{value:"下初",label:"下初"}],form:{address1:"",address2:"",inputUser:"",inputDate:new Date,pointManNo:"",name:"",sex:"男",healthy:"健在",inCurrentCountry:"否",birthDate:"",currentAddr:"",idCardNo:"",mobilePhone:"",isOtherPointmanRel:"否",otherPointmanName:"",otherPointmanRel:""},rules:{address1:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],address2:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],inputUser:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],inputDate:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],pointManNo:[{required:!0,message:"请输入此处必要信息",trigger:"blur"},{validator:function(e,t,a){""===t?a(new Error("请输入此处必要信息")):(/^\d{4,4}$/.test(t)||a(new Error("请输入4位数字")),a())},trigger:["blur","change"]}],name:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],birthDate:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],currentAddr:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],idCardNo:[{required:!0,message:"请输入此处必要信息",trigger:"blur"},{validator:function(t,a,i){if(""===a||null===a||void 0===a)i(new Error("请输入此处必要信息"));else{/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(a)||i(new Error("身份证号不正确")),(18==a.length?2*parseInt(a.charAt(16)/2)!=a.charAt(16)?"男":"女":2*parseInt(a.charAt(14)/2)!=a.charAt(14)?"男":"女")!=e.form.sex&&i(new Error("身份证号与性别不匹配")),e.form.birthDate||i(new Error("身份证号与出生日期不匹配"));var r=e.form.birthDate.replace(/-/g,"");18==a.length?r!=a.substring(6,14)&&i(new Error("身份证号与出生日期不匹配")):r!="19"+a.substring(6,12)&&i(new Error("身份证号与出生日期不匹配")),i()}},trigger:["blur","change"]}],mobilePhone:[{required:!0,message:"请输入此处必要信息",trigger:"blur"},{validator:function(e,t,a){""===t?a(new Error("请输入此处必要信息")):(/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/.test(t)||a(new Error("手机号码不正确，如需输入固话，请在区号后加“-”")),a())},trigger:["blur","change"]}],otherPointmanName:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}],otherPointmanRel:[{required:!0,message:"请输入此处必要信息",trigger:"blur"}]},relations:[{label:"①父亲",value:"01"},{label:"②母亲",value:"02"},{label:"③夫妻",value:"03"},{label:"④未婚子女",value:"04"},{label:"⑤已婚子女",value:"05"},{label:"⑥未婚孙儿(女)/外孙儿(女)",value:"06"},{label:"⑦已婚孙儿(女)/外孙儿(女)",value:"07"},{label:"⑧兄弟姐妹",value:"08"},{label:"⑨其他",value:"09"}],inKinShips:[],outKinShips:[],relationCode:new p.a,detailFlag:!1}},mounted:function(){var e=this;this.detailFlag=!1,sessionStorage.getItem("userName")||this.$router.push({path:"/"}),"Detail"==this.$route.name&&(this.detailFlag=!0,this.initDetail(function(t){e.form=t,e.form.address1=t.addr.match(/乳山市(\S*)乡镇/)[1],e.form.address2=t.addr.match(/乡镇(\S*)村/)[1],e.inKinShips=t.inKinShips,e.outKinShips=t.outKinShips}))},methods:{idInput:function(){18==this.form.idCardNo.length?this.form.birthDate=this.form.idCardNo.substring(6,10)+"-"+this.form.idCardNo.substring(10,12)+"-"+this.form.idCardNo.substring(12,14):15==this.form.idCardNo.length&&(this.form.birthDate="19"+this.form.idCardNo.substring(6,8)+"-"+this.form.idCardNo.substring(8,10)+"-"+this.form.idCardNo.substring(10,12))},healthyChange:function(){"健在"==this.form.healthy?this.rules.idCardNo=[{required:!0,message:"请输入此处必要信息",trigger:"blur"},{validator:this.idCardNoValidate,trigger:["blur","change"]}]:this.rules.idCardNo=[{validator:this.idCardNoValidate,trigger:["blur","change"]}]},initDetail:function(e){var t=this,a="&id="+this.$route.params.id;this.loading=!0,this.axios({method:"get",url:"http://"+this.serviceAddr+":8050/qs/api/v1/get?"+(new Date).getTime()+a}).then(function(a){t.loading=!1,e&&e(a.data.data)}).catch(function(e){t.loading=!1,t.$message.error(e),console.log(e)})},addrChange:function(){this.form.currentAddr="乳山市"+this.form.address1+"乡镇"+this.form.address2+"村（居委会）"},kinshipCodeChange:function(e){var t=this.form.pointManNo+e.kinshipCode,a=0;this.relationCode.get(t)?(a=this.relationCode.get(t)+1,this.relationCode.set(t,a)):(a=1,this.relationCode.set(t,1)),a=a<10?"0"+a:a+"",e.kinshipInputCode=t+a},nameValidate:function(e){return""===e.name?(e.nameTip="请输入此处必要信息",!1):(e.nameTip="",!0)},birthdateValidate:function(e){return""===e.birthdate?(e.birthdateTip="请输入此处必要信息",!1):(e.birthdateTip="",e.idcardNo&&this.idcardNoTableValidate(e),!0)},addrValidate:function(e){return""===e.addr?(e.addrTip="请输入此处必要信息",!1):(e.addrTip="",!0)},kinshipInputCodeValidate:function(e){return""===e.kinshipInputCode?(e.kinshipInputCodeTip="请输入此处必要信息",!1):(e.kinshipInputCodeTip="",!0)},kinshipCodeValidate:function(e){var t=e.kinshipCode;return""===t||"09"==t&&!e.kinshipCodeOther?(e.kinshipCodeTip="请输入此处必要信息",!1):(e.kinshipCodeTip="",!0)},idcardNoTableValidate:function(e){var t=e.idcardNo,a=e.sex;if(""===t)return void 0===e.addr?(e.idcardNoTip="请输入此处必要信息",!1):(e.idcardNoTip="",!0);if(!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t))return e.idcardNoTip="身份证号不正确",!1;18==t.length?e.birthdate=t.substring(6,10)+"-"+t.substring(10,12)+"-"+t.substring(12,14):15==t.length&&(e.birthdate="19"+t.substring(6,8)+"-"+t.substring(8,10)+"-"+t.substring(10,12));if((18==t.length?2*parseInt(t.charAt(16)/2)!=t.charAt(16)?"男":"女":2*parseInt(t.charAt(14)/2)!=t.charAt(14)?"男":"女")!=a)return e.idcardNoTip="身份证号与性别不匹配",!1;if(!e.birthdate)return e.idcardNoTip="身份证号与出生日期不匹配",!1;var i=e.birthdate.replace(/-/g,"");if(18==t.length){if(i!=t.substring(6,14))return e.idcardNoTip="身份证号与出生日期不匹配",!1}else if(i!="19"+t.substring(6,12))return e.idcardNoTip="身份证号与出生日期不匹配",!1;return e.idcardNoTip="",!0},confirm:function(){var e=this;e.$refs.form.validate(function(t){if(!t)return!1;if(e.form.addr="乳山市"+e.form.address1+"乡镇"+e.form.address2+"村（居委会）",0==e.inKinShips.length)return e.$message.warning("请添加目前本村居住数据！"),!1;var a=!0,i=!0;return e.outKinShips.forEach(function(t){a=e.kinshipCodeValidate(t)&&e.nameValidate(t)&&e.birthdateValidate(t)&&e.idcardNoTableValidate(t)&&e.addrValidate(t)}),e.inKinShips.forEach(function(t){i=e.kinshipCodeValidate(t)&&e.nameValidate(t)&&e.birthdateValidate(t)&&e.idcardNoTableValidate(t)}),i?a?(e.form.outKinShips=e.outKinShips,e.form.inKinShips=e.inKinShips,console.log(s()(e.form)),e.loading=!0,void e.axios({method:"post",url:"http://"+e.serviceAddr+":8050/qs/api/v1/addpm",data:s()(e.form),headers:{"Content-Type":"application/json"}}).then(function(t){0==t.data.code?(e.$message.success("保存成功！"),e.$router.push({path:"/list"})):e.$message.error(t.data.msg),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})):(console.log(s()(e.outKinShips)),e.$message.warning("目前外村居住数据错误，请检查！"),!1):(console.log(s()(e.inKinShips)),e.$message.warning("目前本村居住数据错误，请检查！"),!1)})},addIn:function(){this.inKinShips.push({kinshipCode:"",kinshipCodeTip:"",name:"",nameTip:"",sex:"男",birthdate:"",birthdateTip:"",kinshipInputCode:"",kinshipInputCodeTip:"",idcardNo:"",idcardNoTip:"",remark:""})},addOut:function(){this.outKinShips.push({kinshipCode:"",kinshipCodeTip:"",name:"",nameTip:"",sex:"男",birthdate:"",birthdateTip:"",kinshipInputCode:"",kinshipInputCodeTip:"",addr:"",addrTip:"",idcardNo:"",idcardNoTip:"",remark:""})},delInKinShips:function(e){this.inKinShips.splice(e,1)},delOutKinShips:function(e){this.outKinShips.splice(e,1)},cancle:function(){this.$router.push({path:"/list"})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{margin:"10px 10px"}},[a("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("乳山市健康查体项目指示者家庭成员登记表")])]),e._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticStyle:{"text-align":"left","margin-top":"10px"},attrs:{model:e.form,"hide-required-asterisk":!0,"label-width":"158px",rules:e.rules}},[a("el-form-item",{staticStyle:{color:"darkgrey"},attrs:{label:"地址"}},[e._v("\n        乳山市"),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"address1"}},[a("el-select",{staticStyle:{width:"162px"},attrs:{placeholder:"请选择",disabled:e.detailFlag},on:{change:e.addrChange},model:{value:e.form.address1,callback:function(t){e.$set(e.form,"address1",t)},expression:"form.address1"}},e._l(e.address1Options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v("\n        乡镇"),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"address2"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{disabled:e.detailFlag},on:{change:e.addrChange},model:{value:e.form.address2,callback:function(t){e.$set(e.form,"address2",t)},expression:"form.address2"}})],1),e._v("村（居委会）\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"填表人",prop:"inputUser"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.inputUser,callback:function(t){e.$set(e.form,"inputUser",t)},expression:"form.inputUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"填表日期",prop:"inputDate"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag,align:"right",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.inputDate,callback:function(t){e.$set(e.form,"inputDate",t)},expression:"form.inputDate"}})],1),e._v(" "),a("el-form-item",{staticStyle:{color:"darkgrey"},attrs:{label:"指示者编号",prop:"pointManNo"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.pointManNo,callback:function(t){e.$set(e.form,"pointManNo",t)},expression:"form.pointManNo"}}),e._v("\n        （4位，直接从打印名单表中誊抄）\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{attrs:{disabled:e.detailFlag},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}}),e._v(" "),a("el-radio",{attrs:{label:"女"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目前状况",prop:"healthy"}},[a("el-radio-group",{attrs:{disabled:e.detailFlag},on:{change:e.healthyChange},model:{value:e.form.healthy,callback:function(t){e.$set(e.form,"healthy",t)},expression:"form.healthy"}},[a("el-radio",{attrs:{label:"健在"}}),e._v(" "),a("el-radio",{attrs:{label:"去世"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否从本村迁出"}},[a("el-radio-group",{attrs:{disabled:e.detailFlag},model:{value:e.form.inCurrentCountry,callback:function(t){e.$set(e.form,"inCurrentCountry",t)},expression:"form.inCurrentCountry"}},[a("el-radio",{attrs:{label:"是"}}),e._v(" "),a("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNo"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},on:{input:e.idInput},model:{value:e.form.idCardNo,callback:function(t){e.$set(e.form,"idCardNo",t)},expression:"form.idCardNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthDate"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag,align:"right","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthDate,callback:function(t){e.$set(e.form,"birthDate",t)},expression:"form.birthDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"现住址",prop:"currentAddr"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.currentAddr,callback:function(t){e.$set(e.form,"currentAddr",t)},expression:"form.currentAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobilePhone"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.mobilePhone,callback:function(t){e.$set(e.form,"mobilePhone",t)},expression:"form.mobilePhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"该指示者与本村其他指示者是否有亲缘关联"}},[a("el-radio-group",{attrs:{disabled:e.detailFlag},model:{value:e.form.isOtherPointmanRel,callback:function(t){e.$set(e.form,"isOtherPointmanRel",t)},expression:"form.isOtherPointmanRel"}},[a("el-radio",{attrs:{label:"是"}}),e._v(" "),a("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),"是"==e.form.isOtherPointmanRel?a("el-form-item",{attrs:{label:"关联人",prop:"otherPointmanName"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:e.detailFlag},model:{value:e.form.otherPointmanName,callback:function(t){e.$set(e.form,"otherPointmanName",t)},expression:"form.otherPointmanName"}})],1):e._e(),e._v(" "),"是"==e.form.isOtherPointmanRel?a("el-form-item",{attrs:{label:"与关联人关系",prop:"otherPointmanRel"}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择",disabled:e.detailFlag},model:{value:e.form.otherPointmanRel,callback:function(t){e.$set(e.form,"otherPointmanRel",t)},expression:"form.otherPointmanRel"}},e._l(e.relations,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),"09"==e.form.otherPointmanRel?a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.detailFlag},model:{value:e.form.otherPointmanRelOther,callback:function(t){e.$set(e.form,"otherPointmanRelOther",t)},expression:"form.otherPointmanRelOther"}}):e._e(),"09"==e.form.otherPointmanRel?a("span",[e._v("2012年后共同居住1年以上者，请注明关系：（比如：公婆， 妯娌等）")]):e._e()],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"目前本村居住"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.detailFlag,expression:"!detailFlag"}],attrs:{size:"small",type:"success"},on:{click:e.addIn}},[e._v("添加")]),e._v(" "),a("el-table",{ref:"inKinShipsTable",staticStyle:{width:"100%"},attrs:{data:e.inKinShips,stripe:""}},[a("el-table-column",{attrs:{prop:"kinshipCode",label:"亲缘关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{style:"09"==t.row.kinshipCode?"width:45%":"width:100%",attrs:{disabled:e.detailFlag,placeholder:"请选择"},on:{change:function(a){return e.kinshipCodeChange(t.row)},input:function(a){return e.kinshipCodeValidate(t.row)}},model:{value:t.row.kinshipCode,callback:function(a){e.$set(t.row,"kinshipCode",a)},expression:"scope.row.kinshipCode"}},e._l(e.relations,function(e){return a("el-option",{key:e.value,attrs:{title:e.label,label:e.label,value:e.value}})}),1),e._v(" "),"09"==t.row.kinshipCode?a("el-input",{style:"09"==t.row.kinshipCode?"width:52%":"",attrs:{disabled:e.detailFlag},on:{input:function(a){return e.kinshipCodeValidate(t.row)}},model:{value:t.row.kinshipCodeOther,callback:function(a){e.$set(t.row,"kinshipCodeOther",a)},expression:"scope.row.kinshipCodeOther"}}):e._e(),e._v(" "),t.row.kinshipCodeTip?a("el-tooltip",{attrs:{content:t.row.kinshipCodeTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"亲缘关系录入代码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},on:{input:function(a){return e.kinshipInputCodeValidate(t.row)}},model:{value:t.row.kinshipInputCode,callback:function(a){e.$set(t.row,"kinshipInputCode",a)},expression:"scope.row.kinshipInputCode"}}),e._v(" "),t.row.kinshipInputCodeTip?a("el-tooltip",{attrs:{content:t.row.kinshipInputCodeTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},on:{input:function(a){return e.nameValidate(t.row)}},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}),e._v(" "),t.row.nameTip?a("el-tooltip",{attrs:{content:t.row.nameTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},model:{value:t.row.sex,callback:function(a){e.$set(t.row,"sex",a)},expression:"scope.row.sex"}},[a("el-option",{attrs:{value:"男",label:"男"}}),e._v(" "),a("el-option",{attrs:{value:"女",label:"女"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"idcardNo",label:"身份证号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},on:{input:function(a){return e.idcardNoTableValidate(t.row)}},model:{value:t.row.idcardNo,callback:function(a){e.$set(t.row,"idcardNo",a)},expression:"scope.row.idcardNo"}}),e._v(" "),t.row.idcardNoTip?a("el-tooltip",{attrs:{content:t.row.idcardNoTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"birthdate",label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期"},on:{input:function(a){return e.birthdateValidate(t.row)}},model:{value:t.row.birthdate,callback:function(a){e.$set(t.row,"birthdate",a)},expression:"scope.row.birthdate"}}),e._v(" "),t.row.birthdateTip?a("el-tooltip",{attrs:{content:t.row.birthdateTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,type:"textarea"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),e._v(" "),e.detailFlag?e._e():a("el-table-column",{attrs:{prop:"remark",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(a){return e.delInKinShips(t.$index)}}})]}}],null,!1,2231634400)})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目前外村居住"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.detailFlag,expression:"!detailFlag"}],attrs:{size:"small",type:"success"},on:{click:e.addOut}},[e._v("添加")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.outKinShips,stripe:""}},[a("el-table-column",{attrs:{prop:"kinshipCode",label:"亲缘关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{style:"09"==t.row.kinshipCode?"width:45%":"width:100%",attrs:{disabled:e.detailFlag,placeholder:"请选择"},on:{change:function(a){return e.kinshipCodeChange(t.row)},input:function(a){return e.kinshipCodeValidate(t.row)}},model:{value:t.row.kinshipCode,callback:function(a){e.$set(t.row,"kinshipCode",a)},expression:"scope.row.kinshipCode"}},e._l(e.relations,function(e){return a("el-option",{key:e.value,attrs:{title:e.label,label:e.label,value:e.value}})}),1),e._v(" "),"09"==t.row.kinshipCode?a("el-input",{style:"09"==t.row.kinshipCode?"width:52%":"",attrs:{disabled:e.detailFlag},on:{input:function(a){return e.kinshipCodeValidate(t.row)}},model:{value:t.row.kinshipCodeOther,callback:function(a){e.$set(t.row,"kinshipCodeOther",a)},expression:"scope.row.kinshipCodeOther"}}):e._e(),e._v(" "),t.row.kinshipCodeTip?a("el-tooltip",{attrs:{content:t.row.kinshipCodeTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"亲缘关系录入代码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},on:{input:function(a){return e.kinshipInputCodeValidate(t.row)}},model:{value:t.row.kinshipInputCode,callback:function(a){e.$set(t.row,"kinshipInputCode",a)},expression:"scope.row.kinshipInputCode"}}),e._v(" "),t.row.kinshipInputCodeTip?a("el-tooltip",{attrs:{content:t.row.kinshipInputCodeTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},on:{input:function(a){return e.nameValidate(t.row)}},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}),e._v(" "),t.row.nameTip?a("el-tooltip",{attrs:{content:t.row.nameTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag},model:{value:t.row.sex,callback:function(a){e.$set(t.row,"sex",a)},expression:"scope.row.sex"}},[a("el-option",{attrs:{value:"男",label:"男"}}),e._v(" "),a("el-option",{attrs:{value:"女",label:"女"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"idcardNo",label:"身份证号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,title:t.row.idcardNo},on:{input:function(a){return e.idcardNoTableValidate(t.row)}},model:{value:t.row.idcardNo,callback:function(a){e.$set(t.row,"idcardNo",a)},expression:"scope.row.idcardNo"}}),e._v(" "),t.row.idcardNoTip?a("el-tooltip",{attrs:{content:t.row.idcardNoTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"birthdate",label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期"},on:{input:function(a){return e.birthdateValidate(t.row)}},model:{value:t.row.birthdate,callback:function(a){e.$set(t.row,"birthdate",a)},expression:"scope.row.birthdate"}}),e._v(" "),t.row.birthdateTip?a("el-tooltip",{attrs:{content:t.row.birthdateTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"现住址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,title:t.row.addr},on:{input:function(a){return e.addrValidate(t.row)}},model:{value:t.row.addr,callback:function(a){e.$set(t.row,"addr",a)},expression:"scope.row.addr"}}),e._v(" "),t.row.addrTip?a("el-tooltip",{attrs:{content:t.row.addrTip}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red",position:"absolute",top:"15px",right:"5px"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.detailFlag,type:"textarea"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),e._v(" "),e.detailFlag?e._e():a("el-table-column",{attrs:{prop:"remark",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(a){return e.delOutKinShips(t.$index)}}})]}}],null,!1,573161481)})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.detailFlag,expression:"!detailFlag"}],attrs:{type:"primary",disabled:e.loading},on:{click:e.confirm}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{disabled:e.loading},on:{click:e.cancle}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,m,!1,function(e){a("Ej5p")},"data-v-71b9996f",null).exports,g={components:{AddWin:f},data:function(){return{userName:"",addFlag:!1,total:0,currentPage:1,pageSize:10,tableData:[],selectedRow:[]}},mounted:function(){sessionStorage.getItem("userName")?this.userName=sessionStorage.getItem("userName"):this.$router.push({path:"/"}),this.getList()},methods:{getList:function(){var e=this,t={page:this.currentPage,pageSize:this.pageSize,field:"name"},a="";c()(t).forEach(function(e){a+="&"+e+"="+t[e]}),this.axios({method:"get",url:"http://"+this.serviceAddr+":8050/qs/api/v1/querypm?"+(new Date).getTime()+a}).then(function(t){e.tableData=t.data.data,e.total=t.data.total}).catch(function(t){e.loading=!1,e.$message.error(t),console.log(t)})},add:function(){this.$router.push({path:"/Add"})},detail:function(){this.$router.push({path:"/Detail/"+this.selectedRow.id})},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleSizeChange:function(e){this.pageSize=e,this.getList()},selectRow:function(e){this.selectedRow=e},delRow:function(){var e=this;this.$confirm("确定删除所选择的数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(e.selectedRow){var t={pmid:e.selectedRow.id},a="";c()(t).forEach(function(e){a+="&"+e+"="+t[e]}),e.axios({method:"post",data:s()({}),headers:{"Content-Type":"application/json"},url:"http://"+e.serviceAddr+":8050/qs/api/v1/deletepm?"+(new Date).getTime()+a}).then(function(t){0==t.data.code?(e.$message.success("删除成功！"),e.getList()):e.$message.error(t.data.code)}).catch(function(t){e.$message.error(t),console.log(t)})}}).catch(function(){})},exportData:function(){document.location="http://"+this.serviceAddr+":8050/qs/download"},logout:function(){var e=this;this.$confirm("确定退出登录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){sessionStorage.clear(),e.$router.push({path:"/"})}).catch(function(){})}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%",height:"22px","text-align":"right"}},[a("el-link",{staticStyle:{"margin-right":"10px",cursor:"default"},attrs:{icon:"el-icon-s-custom",underline:!1}},[e._v("欢迎："+e._s(e.userName))]),e._v(" "),a("el-link",{staticStyle:{"margin-right":"10px","margin-left":"10px"},attrs:{icon:"el-icon-s-promotion"},on:{click:e.logout}},[e._v("退出")])],1),e._v(" "),a("div",{staticClass:"operButton"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.add}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",disabled:0==e.selectedRow.length},on:{click:e.detail}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",disabled:0==e.selectedRow.length},on:{click:e.delRow}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.exportData}},[e._v("导出")])],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{margin:"10px 10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","highlight-current-row":""},on:{"current-change":e.selectRow}},[a("el-table-column",{attrs:{prop:"pointManNo",label:"指示者编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNo",label:"身份证号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"住址"}})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"left",margin:"10px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.addFlag?a("add-win"):e._e()],1)],1)},staticRenderFns:[]};var v=a("VU/8")(g,b,!1,function(e){a("Qy8x")},"data-v-312ffdce",null).exports,w={data:function(){return{username:"",password:"",flag:!1}},mounted:function(){},methods:{login:function(){var e=this;if(this.username)if(this.password){var t={username:this.username,password:this.password};this.axios({method:"post",url:"http://"+this.serviceAddr+":8050/qs/api/v1/login",data:s()(t),headers:{"Content-Type":"application/json"}}).then(function(t){0==t.data.code?(sessionStorage.setItem("userName",e.username),e.$router.push({path:"/list"})):e.$message.error(t.data.msg),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})}else this.$message.warning("请输入密码");else this.$message.warning("请输入用户名")}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg"},[a("div",{staticClass:"dowebok"},[a("div",{staticClass:"logo"}),e._v(" "),a("div",{staticClass:"form-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"username",type:"text",autocomplete:"off",placeholder:"用户名"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("p",{staticClass:"tip"},[e._v("请输入用户名")])]),e._v(" "),a("div",{staticClass:"form-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",autocomplete:"off",placeholder:"登录密码"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("p",{staticClass:"tip"},[e._v("邮箱或密码不正确")])]),e._v(" "),a("div",{staticClass:"form-item"},[a("button",{attrs:{id:"submit"},on:{click:e.login}},[e._v("登 录")])])])])},staticRenderFns:[]};var y=a("VU/8")(w,k,!1,function(e){a("XO3N")},"data-v-fc2b78fe",null).exports;i.default.use(n.a);var _=new n.a({routes:[{path:"/login",name:"Login",alias:"/",component:y},{path:"/list",name:"List",component:v},{path:"/Add",name:"Add",component:f},{path:"/Detail/:id",name:"Detail",component:f}]}),C=a("zL8q"),x=a.n(C),S=(a("7t+N"),a("tvR6"),a("sfy8"),a("5W1q"),a("EWIa"),a("Muz9")),N=a.n(S),$=a("Rf8U"),T=a.n($);i.default.use(T.a,N.a),i.default.config.productionTip=!1,i.default.prototype.serviceAddr=document.location.hostname,i.default.use(x.a),new i.default({el:"#app",router:_,components:{App:o},template:"<App/>"})},Qy8x:function(e,t){},XO3N:function(e,t){},sfy8:function(e,t){},tvR6:function(e,t){},wdgB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0bf44fae107092c89702.js.map